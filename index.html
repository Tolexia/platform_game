<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    *{
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }
    body{
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100lvw;
        height: 100dvh;
        overflow: hidden;
    }
    canvas{
        border: 1px solid black;
    }
</style>
<body>
    <canvas id="canvas" ></canvas>
</body>
<script>
    var canvas = document.getElementById('canvas')
    canvas.width = window.innerWidth
    canvas.height = window.innerHeight
    const ctx = canvas.getContext("2d");
    ctx.imageSmoothingEnabled = true;
    let raf;

    const ball = {
        x: 100,
        y: 100,
        vx: 5,
        vy: 2,
        radius: 5,
        color: "blue",
        draw() {
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);
          ctx.closePath();
          ctx.fillStyle = this.color;
          ctx.fill();
        },
    };
      
    function draw() 
    {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ball.draw();
        

         // Y
        if ( ball.y + ball.vy >= canvas.height - ball.radius  ) 
        {
            ball.vy = 0;
            jumpcount = 0;
        }
        else if (ball.y + ball.vy < ball.radius) {
            ball.vy = -ball.vy;
        }

        if (
            ball.x + ball.vx >= canvas.width - ball.radius ||
            ball.x + ball.vx <= ball.radius
        ) {
            ball.vx = 0;
        }

        ball.x += ball.vx;
        ball.y += ball.vy;

        ball.vy *= 0.99;
        ball.vy += 0.25;

        ball.vx *= 0.99
        
        raf = window.requestAnimationFrame(draw);
    }

    let jumpcount = 0

    let pressingUp = false
    let pressingDown = false
    let pressingLeft = false
    let pressingRight = false
    document.body.addEventListener("keydown", e => {
        console.log("e", e)
        if(e.key == "ArrowUp" && jumpcount < 2)
        {
            ball.vy = -10
            jumpcount++
        }
        if(e.key == "ArrowLeft")
        {
            pressingLeft = true 
            left()
        }
        if(e.key == "ArrowRight")
        {
            pressingRight = true 
            right()
        }
    })
    function up(){
        if(ball.vy > -10) ball.vy -= 1
        if(pressingUp == true)window.requestAnimationFrame(up)
    }
    function left(){
        if(ball.vx > -5) ball.vx -= 0.25
        if(pressingLeft == true)window.requestAnimationFrame(left)
    }
    function right(){
        if(ball.vx < 5) ball.vx += 0.5
        if(pressingRight == true)window.requestAnimationFrame(right)
    }
    document.body.addEventListener("keyup", e => {
        if(e.key == "ArrowLeft")
            pressingLeft = false 
        if(e.key == "ArrowRight")
            pressingRight = false 
    })
    
    ball.draw();
    draw()
</script>
</html>